# Repository Guidelines

## Project Structure & Module Organization
The application entry point lives in `main.py`, with reusable components in `src/` (`agents/`, `services/`, `filters/`, `observability/`, and `plugins/`). Shared configuration defaults reside in `config.py`; environment-specific overrides go in `.env` files ignored by Git. Integration examples for demos are under `examples/`, while telemetry dashboards and alerting helpers sit in `monitoring/`. Automated tests mirror the code layout: `tests/unit/` for fast checks, `tests/integration/` for HITL workflows, and `tests/fixtures/` for reusable data builders.

## Build, Test, and Development Commands
Run `make setup-dev` once to install dev dependencies and register pre-commit hooks. Use `make test` for the full pytest + coverage suite, `make test-unit` for focused iterations, and `make test-integration` to exercise integration-marked flows. Quality gates are packaged: `make format`, `make lint`, `make type-check`, and `make security-check`; `make check` chains the standard pre-PR checks, while `make demo` runs the agent in demo mode.

## Coding Style & Naming Conventions
Target Python 3.11+ and keep lines <=120 characters, matching the Black and isort profiles in `pyproject.toml`. Prefer explicit type hints; MyPy runs in strict mode, so annotate public functions and generators. Follow PEPÂ 8 naming (snake_case functions, PascalCase classes); reserve ALL_CAPS for constants in module scope. Let pre-commit manage `black`, `isort`, `flake8`, and `bandit` before pushing.

## Testing Guidelines
Write new tests beside the code they cover, using pytest markers (`@pytest.mark.unit`, `@pytest.mark.integration`) to control scope. Maintain the HTML coverage report generated by `make test`; enforce `make test-coverage` before large merges to stay above the 80% threshold. Reuse fixtures from `tests/fixtures/` and prefer descriptive test names (`test_agent_handles_invalid_task`) to clarify behaviour.

## Commit & Pull Request Guidelines
History shows concise, lower-case summaries (`git log --oneline`); keep future commits under ~60 characters in the imperative voice (e.g., "add hitl timeout guard"). Reference tickets in the body when relevant and group logical changes together. For PRs, include a problem statement, testing evidence (command output or screenshots), configuration notes, and any monitoring updates so reviewers can validate agent behaviour quickly.

## Configuration & Observability Tips
Never commit real secrets; load them via environment variables consumed by `pydantic-settings`. When adding telemetry, route spans and metrics through `src/observability/` to guarantee exporters remain aligned. Update `monitoring/` notebooks or dashboards when you change agent intents or feedback loops so on-call contributors can trace interactions end-to-end.
